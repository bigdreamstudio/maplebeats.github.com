---
layout: post
author: maplebeats
title: 更新3.6.2内核
summary: 昨天linux-ck更新到了3.6.2。于是嘛，本着不更新不舒服斯基，果断编译之。兴冲冲的重启了，然后悲剧了。开机马上就报一堆错，但是使用一些命令正常，而且很容易卡住。心里暗想是不是就这样子滚死了。
---

h3. 分析

本来用洗发水就得有个准备，所以肯定不只一个内核啦。马上用sysrq大法切换到lts内核。结果太让我失望了，lts内核太老了，果断进入之后显示不正常。在光标处就是一堆莫名其妙的东东。查看systemd日志看到是在启动networkmanager的时候才产生报错，于是我怀疑networkmanager的问题（为什么会这么想，因为我对networkmanager本来就十分不满），然后盲打把networkmanager禁止启动了（为什么要盲打呢，因为屏幕是花的。）。

reboot至3.6.2内核，果然没有了报错。果断换了台电脑下载了wireless-tools准备用命令行来连接网络试试。结果在运行 @iwlist wlan0 scan@之后，kernel就挂掉了。这时候我才把问题定位到了无线驱动上。。。再用modprobe wl试了下，果然是这样子的。

驱动模块出了问题不是我能解决的问题，于是只有求助了。https://bbs.archlinux.org/viewtopic.php?id=150642 broadcom-wl-ck的包维护者回复了我，但是问题并没有解决。虽然没有得到我想要的答案，但是发现了一位gentoo用户也有这个问题一下子就欣慰了。哈哈

h3. core

昨天core内核还是3.5.6，所以把无线网救回来了。期间我就一直在想万一core内核也更新到3.6怎么办。结果今天up一下就发现了内核更新:(。更新强迫症保证了我肯定会更新，于是直接就悲剧了。

h3. 解决

只有用同学的windows电脑上aur上看看，结果我在首页就发现了broadcom-wl的更新。在评论里也发现了昨天(应该是昨天吧)的一些post，都在讨论这个问题，而且今天的更新似乎修复了。我把它下载下来之后，发现linux-recent.patch里的代码果然是15号的更新。马上把它用U盘拷到了我的电脑上，编译，安装，重启。连接上无线...Over！（虽然期间我什么都没做）

h3. Tips

在自己电脑上准备好一份完整的驱动源码，随时准备打补丁or安装会是一个非常不错的习惯。

明天腾迅面试求RP。虽然不报什么希望,走到哪里算哪里吧:(

